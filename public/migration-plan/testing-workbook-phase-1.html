<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Phase 1 · Yarny Testing Workbook</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="/global.css">
  <link rel="stylesheet" href="/docs.css">
  <link rel="stylesheet" href="/footer.css">
  <link rel="stylesheet" href="/migration-plan/testing-workbook.css">
  <script src="/migration-plan/testing-workbook.js" defer></script>
</head>
<body data-storage-key="testingWorkbookPhase1">
  <header class="docs-header-bar">
    <div class="header-left">
      <button class="mobile-menu-btn" aria-label="Open navigation menu">
        <i class="material-icons">menu</i>
      </button>
      <h1 class="header-title">Phase 1 · Testing Workbook</h1>
    </div>
    <nav class="header-nav">
      <a href="/stories.html" id="storiesNavLink" class="btn-primary" style="display: none;">
        <i class="material-icons" style="font-size: 1.2rem;">auto_stories</i>
        Back to Stories
      </a>
      <a href="/docs.html" class="btn-outlined">Docs</a>
      <a href="/" id="loginNavLink" class="btn-outlined">Back to Login</a>
    </nav>
  </header>
  <div class="docs-container">
    <main class="docs-main">
      <div class="sidebar-backdrop"></div>
      <aside class="docs-sidebar">
        <div class="sidebar-header">
          <div class="sidebar-branding">
            <h1>Yarny</h1>
            <p class="docs-subtitle">Your personal writing tool</p>
          </div>
          <a href="/migration-plan" style="color: var(--color-primary); text-decoration: none; font-weight: var(--font-weight-semibold); display: block; margin-bottom: var(--space-md);">
            Migration Plan
          </a>
          <a href="/migration-plan/testing-workbook" style="color: rgba(255, 255, 255, 0.7); text-decoration: none; font-size: 0.95rem; display: block;">Back to Workbook Overview</a>
        </div>
        <nav class="sidebar-nav">
          <ul class="sidebar-nav-list">
            <li><a href="#phase-intro" class="nav-link">Phase Overview</a></li>
            <li><a href="#section-0" class="nav-link">Section 0 · Test Corpus Setup</a></li>
            <li><a href="#section-1" class="nav-link">Section 1 · Smoke Tests &amp; Infrastructure</a></li>
            <li><a href="#section-2" class="nav-link">Section 2 · Google Drive Integration</a></li>
            <li><a href="#phase-summary" class="nav-link">Phase Progress</a></li>
          </ul>
        </nav>
      </aside>

      <div class="docs-content">
        <div class="phase-breadcrumbs">
          <a href="/migration-plan/testing-workbook">Testing Workbook</a>
          <span>/</span>
          <span>Phase 1 · Setup &amp; Foundations</span>
        </div>

        <div class="workbook-intro" id="phase-intro" data-section-anchor>
          <h1>Phase 1 · Setup &amp; Foundations</h1>
          <p>Establish a reliable baseline before functional testing begins. This phase covers test corpus provisioning, local tooling smoke checks, and Google Drive integration.</p>
          <ul style="margin: var(--space-lg) 0 0; padding-left: var(--space-xl); color: rgba(255, 255, 255, 0.78);">
            <li>Prepare consistent sample data across small, medium, and large projects.</li>
            <li>Confirm the React app boots with expected mocks and infrastructure.</li>
            <li>Verify Google Drive sync prerequisites so later phases run smoothly.</li>
          </ul>
          <div class="phase-nav-links">
            <a href="/migration-plan/testing-workbook-phase-2.html">Next: Phase 2</a>
            <a href="/migration-plan/testing-workbook-phase-3.html">Phase 3</a>
            <a href="/migration-plan/testing-workbook-phase-4.html">Phase 4</a>
            <a href="/migration-plan/testing-workbook-phase-5.html">Phase 5</a>
          </div>
        </div>

        <!-- Section 0: Test Corpus Setup -->
        <div class="test-section" data-section-anchor id="section-0">
          <h2><i class="material-icons">folder</i> Section 0: Test Corpus Setup</h2>
          <p style="color: rgba(255, 255, 255, 0.7); margin-bottom: var(--space-lg);">Before running comprehensive tests, set up the test corpus in Google Drive. This provides standardized test data for validating all functionality across different project sizes.</p>
        
        <div class="test-item">
          <h4>Setup 0.1: Generate Test Corpus Files (If Not Already Done)</h4>
          <p>Generate the test corpus files locally. This only needs to be done once, or if you need to regenerate the files.</p>
          <div class="test-steps">
            <ol>
              <li>Open a terminal in the project root directory</li>
              <li>Navigate to the test-corpus directory: <code>cd test-corpus</code></li>
              <li>Run the generation script: <code>node generate-test-corpus.js</code></li>
              <li>Verify files are created:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li><code>test-medium/</code> directory with chapters, people, places, things folders</li>
                  <li><code>test-large/</code> directory with chapters, people, places, things folders</li>
                  <li>Metadata files: <code>test-medium/metadata.json</code> and <code>test-large/metadata.json</code></li>
                </ul>
              </li>
              <li>Verify file counts:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>test-medium: ~110 files (80 chapter snippets + 30 notes)</li>
                  <li>test-large: ~505 files (430 chapter snippets + 75 notes, including Chapter 13 with 55 snippets)</li>
                </ul>
              </li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="setup-0-1" name="setup-0-1">
            <label for="setup-0-1">Test corpus files generated successfully</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Setup 0.2: Create Google Drive Test Corpus Folder</h4>
          <p>Create the main test corpus folder in Google Drive and set up the folder structure.</p>
          <div class="test-steps">
            <ol>
              <li>Open Google Drive in your browser</li>
              <li>Create a new folder named <strong>"Yarny Test Corpus"</strong> (exact name is important)</li>
              <li>Note the folder ID from the URL (you'll need this later)</li>
              <li>Share the folder with the engineering team (set appropriate permissions)</li>
              <li>Verify the folder is accessible to all team members</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="setup-0-2" name="setup-0-2">
            <label for="setup-0-2">Google Drive test corpus folder created and shared</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Setup 0.3: Upload test-small Project</h4>
          <p>Upload the small test project (sample-project) to Google Drive. This is the simplest project for basic smoke tests.</p>
          <div class="test-steps">
            <ol>
              <li>In Google Drive, navigate to the "Yarny Test Corpus" folder</li>
              <li>Create a new folder named <strong>"test-small"</strong></li>
              <li>Inside test-small, create the story folder structure:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Create <strong>"Chapters"</strong> folder</li>
                  <li>Create <strong>"People"</strong> folder</li>
                  <li>Create <strong>"Places"</strong> folder</li>
                  <li>Create <strong>"Things"</strong> folder</li>
                </ul>
              </li>
              <li>Upload files from <code>test-corpus/sample-project/stories/</code>:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Upload as Google Docs (not plain text files)</li>
                  <li>Create appropriate chapter folders if needed</li>
                </ul>
              </li>
              <li>Create <code>project.json</code>, <code>data.json</code>, and <code>goal.json</code> files in the story folder (use structure from <code>src/utils/storyCreation.ts</code> as reference)</li>
              <li>Note the story folder ID for later use</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="setup-0-3" name="setup-0-3">
            <label for="setup-0-3">test-small project uploaded to Google Drive</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Setup 0.4: Upload test-medium Project</h4>
          <p>Upload the medium test project to Google Drive. This project has 10 chapters, 80 snippets, and 30 notes for realistic performance testing. <strong>Time estimate: 30-60 minutes</strong>.</p>
          
          <div class="note-box" style="margin-bottom: var(--space-lg);">
            <p><strong>Prerequisites:</strong> Before starting, ensure local files are generated. Run <code>node test-corpus/generate-test-corpus.js</code> if not already done. Verify files exist in <code>test-corpus/test-medium/</code>.</p>
          </div>

          <div class="test-steps">
            <ol>
              <li><strong>Verify local files are generated:</strong>
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Navigate to <code>test-corpus/test-medium/</code> in terminal</li>
                  <li>Verify: <code>ls chapters/</code> shows 10 chapter directories (chapter-1 through chapter-10)</li>
                  <li>Verify: <code>find chapters -name "*.txt" | wc -l</code> shows 80 snippet files</li>
                  <li>Verify: <code>find people places things -name "*.txt" | wc -l</code> shows 30 note files</li>
                  <li>Verify: <code>metadata.json</code> exists</li>
                </ul>
              </li>
              <li><strong>Create story folder in Google Drive:</strong>
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Open Google Drive: https://drive.google.com</li>
                  <li>Navigate to or create the "Yarny Test Corpus" folder</li>
                  <li>Click "New" → "Folder"</li>
                  <li>Name it: <strong>"test-medium"</strong> (or "The Chronicles of Test Medium" to match story title)</li>
                  <li>Click "Create"</li>
                  <li><strong>Record the folder ID:</strong> Right-click folder → "Get link" → Extract ID from URL (string between <code>/folders/</code> and next <code>/</code> or <code>?</code>)</li>
                  <li>Save this ID - you'll need it to update metadata.json later</li>
                </ul>
              </li>
              <li><strong>Create folder structure:</strong>
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>In the <code>test-medium</code> folder, create:</li>
                  <li>"Chapters" folder (click "New" → "Folder")</li>
                  <li>Inside "Chapters", create 10 chapter subfolders:
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li>Chapter 1, Chapter 2, Chapter 3, ... Chapter 10</li>
                    </ul>
                  </li>
                  <li>In <code>test-medium</code> folder (same level as "Chapters"), create:</li>
                  <li>"People" folder, "Places" folder, "Things" folder</li>
                </ul>
              </li>
              <li><strong>Upload chapter snippets as Google Docs:</strong>
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li><strong>For Chapter 1:</strong>
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li>Navigate to <code>test-medium/Chapters/Chapter 1/</code></li>
                      <li>Click "New" → "File upload"</li>
                      <li>Select all 8 snippet files from <code>test-corpus/test-medium/chapters/chapter-1/</code>:
                        <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                          <li>snippet-1-1.txt, snippet-1-2.txt, ..., snippet-1-8.txt</li>
                        </ul>
                      </li>
                      <li>Wait for upload to complete</li>
                    </ul>
                  </li>
                  <li><strong>Convert each .txt file to Google Doc:</strong>
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li>Right-click on <code>snippet-1-1.txt</code> → "Open with" → "Google Docs"</li>
                      <li>This creates a Google Doc with the same content</li>
                      <li><strong>Delete the original .txt file</strong> (keep only the Google Doc)</li>
                      <li>Repeat for all 8 snippet files in Chapter 1</li>
                    </ul>
                  </li>
                  <li><strong>Repeat for all chapters:</strong>
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li>Do the same process for Chapters 2-10</li>
                      <li>Each chapter should end up with 8 Google Docs (not .txt files)</li>
                      <li>Total: 10 chapters × 8 snippets = 80 Google Docs</li>
                    </ul>
                  </li>
                  <li><strong>Note:</strong> This process is time-consuming (80 files × conversion time). Consider using Google Drive API script for automation if you have API credentials.</li>
                </ul>
              </li>
              <li><strong>Upload notes as text files:</strong>
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li><strong>People notes:</strong>
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li>Navigate to <code>test-medium/People/</code></li>
                      <li>Click "New" → "File upload"</li>
                      <li>Select all 10 files from <code>test-corpus/test-medium/people/</code> (person-1.txt through person-10.txt)</li>
                      <li>Notes can remain as .txt files (they don't need to be Google Docs)</li>
                    </ul>
                  </li>
                  <li><strong>Places notes:</strong>
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li>Navigate to <code>test-medium/Places/</code></li>
                      <li>Upload all 10 files from <code>test-corpus/test-medium/places/</code> (place-1.txt through place-10.txt)</li>
                    </ul>
                  </li>
                  <li><strong>Things notes:</strong>
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li>Navigate to <code>test-medium/Things/</code></li>
                      <li>Upload all 10 files from <code>test-corpus/test-medium/things/</code> (thing-1.txt through thing-10.txt)</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li><strong>Create project.json, data.json, and goal.json:</strong>
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>In the <code>test-medium</code> folder, create these JSON files:</li>
                  <li><strong>project.json:</strong>
                    <pre style="background: rgba(0, 0, 0, 0.3); padding: var(--space-md); border-radius: 4px; margin: var(--space-sm) 0; overflow-x: auto; font-size: 0.9em;">{
  "id": "test-medium",
  "name": "Test Medium Project",
  "description": "Medium-sized test project for performance and realistic usage testing",
  "genre": "Fantasy",
  "wordGoal": 25000,
  "createdAt": "2025-01-08T00:00:00.000Z",
  "updatedAt": "2025-01-08T00:00:00.000Z"
}</pre>
                  </li>
                  <li><strong>data.json:</strong> (can be empty or use structure below - Yarny will populate it)
                    <pre style="background: rgba(0, 0, 0, 0.3); padding: var(--space-md); border-radius: 4px; margin: var(--space-sm) 0; overflow-x: auto; font-size: 0.9em;">{
  "chapters": [],
  "snippets": [],
  "people": [],
  "places": [],
  "things": []
}</pre>
                  </li>
                  <li><strong>goal.json:</strong>
                    <pre style="background: rgba(0, 0, 0, 0.3); padding: var(--space-md); border-radius: 4px; margin: var(--space-sm) 0; overflow-x: auto; font-size: 0.9em;">{
  "target": 25000,
  "deadline": "2025-12-31T23:59:59.000Z",
  "writingDays": [true, true, true, true, true, false, false],
  "daysOff": [],
  "mode": "elastic"
}</pre>
                  </li>
                  <li>These files can be created as Google Docs or uploaded as text files</li>
                </ul>
              </li>
              <li><strong>Update metadata.json with Drive folder IDs:</strong>
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Open <code>test-corpus/test-medium/metadata.json</code> in a text editor</li>
                  <li>Get folder IDs from Google Drive (right-click folder → "Get link" → extract ID from URL)</li>
                  <li>Replace <code>REPLACE_WITH_DRIVE_FOLDER_ID</code> placeholders with actual IDs:
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li><code>project.driveFolderId</code> - The test-medium story folder ID</li>
                      <li><code>story.driveFolderId</code> - Same as project folder ID</li>
                      <li><code>chapters[].driveFolderId</code> - Each chapter folder ID (Chapter 1, Chapter 2, etc.)</li>
                    </ul>
                  </li>
                  <li>Save the updated metadata.json file</li>
                  <li><strong>Note:</strong> You don't need to update snippet IDs or note IDs - Yarny will discover these automatically</li>
                </ul>
              </li>
              <li><strong>Verify upload:</strong>
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Check folder structure matches expected structure</li>
                  <li>Verify each chapter folder contains 8 Google Docs (not .txt files)</li>
                  <li>Verify People, Places, Things folders each contain 10 .txt files</li>
                  <li>Verify project.json, data.json, and goal.json exist</li>
                  <li>Test in Yarny:
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li>Open Yarny app</li>
                      <li>The test-medium story should appear in the stories list</li>
                      <li>Click on the story to open it</li>
                      <li>Verify all 10 chapters appear</li>
                      <li>Verify all 80 snippets are accessible</li>
                      <li>Verify all 30 notes appear in the Notes sidebar</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="setup-0-4" name="setup-0-4">
            <label for="setup-0-4">test-medium project uploaded to Google Drive (10 chapters, 80 snippets, 30 notes)</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Setup 0.5: Upload test-large Project</h4>
          <p>Upload the large test project to Google Drive. This project has 25 chapters, 430 chapter snippets (including Chapter 13 with 55 snippets), and 75 notes for stress testing and export chunking validation. <strong>Time estimate: 2-4 hours</strong>.</p>
          
          <div class="note-box" style="margin-bottom: var(--space-lg);">
            <p><strong>Prerequisites:</strong> Before starting, ensure local files are generated. Run <code>node test-corpus/generate-test-corpus.js</code> if not already done. Verify files exist in <code>test-corpus/test-large/</code>.</p>
          </div>

          <div class="test-steps">
            <ol>
              <li><strong>Verify local files are generated:</strong>
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Navigate to <code>test-corpus/test-large/</code> in terminal</li>
                  <li>Verify: <code>ls chapters/</code> shows 25 chapter directories (chapter-1 through chapter-25)</li>
                  <li>Verify: <code>find chapters/chapter-13 -name "*.txt" | wc -l</code> shows 55 snippet files (critical for export chunking tests)</li>
                  <li>Verify: <code>find chapters/chapter-1 -name "*.txt" | wc -l</code> shows 15 snippet files (other chapters)</li>
                  <li>Verify: <code>find chapters -name "*.txt" | wc -l</code> shows 430 snippet files total</li>
                  <li>Verify: <code>find people places things -name "*.txt" | wc -l</code> shows 75 note files (25 each)</li>
                  <li>Verify: <code>metadata.json</code> exists</li>
                </ul>
              </li>
              <li><strong>Create story folder in Google Drive:</strong>
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Open Google Drive: https://drive.google.com</li>
                  <li>Navigate to or create the "Yarny Test Corpus" folder</li>
                  <li>Click "New" → "Folder"</li>
                  <li>Name it: <strong>"test-large"</strong> (or "The Epic Saga of Test Large" to match story title)</li>
                  <li>Click "Create"</li>
                  <li><strong>Record the folder ID:</strong> Right-click folder → "Get link" → Extract ID from URL (string between <code>/folders/</code> and next <code>/</code> or <code>?</code>)</li>
                  <li>Save this ID - you'll need it to update metadata.json later</li>
                </ul>
              </li>
              <li><strong>Create folder structure:</strong>
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>In the <code>test-large</code> folder, create:</li>
                  <li>"Chapters" folder (click "New" → "Folder")</li>
                  <li>Inside "Chapters", create 25 chapter subfolders:
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li>Chapter 1, Chapter 2, Chapter 3, ... Chapter 25</li>
                      <li><strong>Tip:</strong> Create them in batches to save time</li>
                    </ul>
                  </li>
                  <li>In <code>test-large</code> folder (same level as "Chapters"), create:</li>
                  <li>"People" folder, "Places" folder, "Things" folder</li>
                </ul>
              </li>
              <li><strong>Upload chapter snippets as Google Docs:</strong>
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li><strong>For regular chapters (1-12, 14-25) - 15 snippets each:</strong>
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li>For each chapter (e.g., Chapter 1):
                        <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                          <li>Navigate to <code>test-large/Chapters/Chapter 1/</code></li>
                          <li>Click "New" → "File upload"</li>
                          <li>Select all 15 snippet files from <code>test-corpus/test-large/chapters/chapter-1/</code> (snippet-1-1.txt through snippet-1-15.txt)</li>
                          <li>Wait for upload to complete</li>
                          <li>Right-click each .txt file → "Open with" → "Google Docs"</li>
                          <li><strong>Delete the original .txt file</strong> (keep only the Google Doc)</li>
                          <li>Repeat for all 15 snippet files</li>
                        </ul>
                      </li>
                      <li>Repeat this process for all 24 regular chapters (1-12, 14-25)</li>
                      <li>Total: 24 chapters × 15 snippets = 360 Google Docs</li>
                    </ul>
                  </li>
                  <li><strong>For Chapter 13 - 55 snippets (critical for export chunking tests):</strong>
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li>Navigate to <code>test-large/Chapters/Chapter 13/</code></li>
                      <li>Click "New" → "File upload"</li>
                      <li>Select all 55 snippet files from <code>test-corpus/test-large/chapters/chapter-13/</code> (snippet-13-1.txt through snippet-13-55.txt)</li>
                      <li>Wait for upload to complete</li>
                      <li>Right-click each .txt file → "Open with" → "Google Docs"</li>
                      <li><strong>Delete the original .txt file</strong> (keep only the Google Doc)</li>
                      <li>Repeat for all 55 snippet files</li>
                      <li><strong>Verify:</strong> Chapter 13 should have exactly 55 Google Docs (this is critical for export chunking tests)</li>
                    </ul>
                  </li>
                  <li><strong>Total verification:</strong>
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li>According to the README: 25 chapters with 15 snippets each = 375 snippets, but Chapter 13 has 55 instead of 15 (40 extra), making total = 430 chapter snippets</li>
                      <li>However, verify the actual file count in your local <code>test-corpus/test-large/chapters/</code> directory matches the expected structure</li>
                      <li><strong>Important:</strong> The exact count may vary - the key requirement is that Chapter 13 has exactly 55 snippets for export chunking tests</li>
                      <li>Verify the final count matches what's expected in <code>test-corpus/test-large/metadata.json</code></li>
                    </ul>
                  </li>
                  <li><strong>Note:</strong> This process is very time-consuming (430+ files × conversion time). Consider using Google Drive API script for automation if you have API credentials. Alternatively, you can use a bulk conversion tool or script.</li>
                </ul>
              </li>
              <li><strong>Upload notes as text files:</strong>
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li><strong>People notes:</strong>
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li>Navigate to <code>test-large/People/</code></li>
                      <li>Click "New" → "File upload"</li>
                      <li>Select all 25 files from <code>test-corpus/test-large/people/</code> (person-1.txt through person-25.txt)</li>
                      <li>Notes can remain as .txt files (they don't need to be Google Docs)</li>
                    </ul>
                  </li>
                  <li><strong>Places notes:</strong>
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li>Navigate to <code>test-large/Places/</code></li>
                      <li>Upload all 25 files from <code>test-corpus/test-large/places/</code> (place-1.txt through place-25.txt)</li>
                    </ul>
                  </li>
                  <li><strong>Things notes:</strong>
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li>Navigate to <code>test-large/Things/</code></li>
                      <li>Upload all 25 files from <code>test-corpus/test-large/things/</code> (thing-1.txt through thing-25.txt)</li>
                    </ul>
                  </li>
                </ul>
              </li>
              <li><strong>Create project.json, data.json, and goal.json:</strong>
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>In the <code>test-large</code> folder, create these JSON files:</li>
                  <li><strong>project.json:</strong>
                    <pre style="background: rgba(0, 0, 0, 0.3); padding: var(--space-md); border-radius: 4px; margin: var(--space-sm) 0; overflow-x: auto; font-size: 0.9em;">{
  "id": "test-large",
  "name": "Test Large Project",
  "description": "Large test project for stress testing, virtualization validation, lazy loading, and export chunking",
  "genre": "Epic Fantasy",
  "wordGoal": 100000,
  "createdAt": "2025-01-08T00:00:00.000Z",
  "updatedAt": "2025-01-08T00:00:00.000Z"
}</pre>
                  </li>
                  <li><strong>data.json:</strong> (can be empty or use structure below - Yarny will populate it)
                    <pre style="background: rgba(0, 0, 0, 0.3); padding: var(--space-md); border-radius: 4px; margin: var(--space-sm) 0; overflow-x: auto; font-size: 0.9em;">{
  "chapters": [],
  "snippets": [],
  "people": [],
  "places": [],
  "things": []
}</pre>
                  </li>
                  <li><strong>goal.json:</strong>
                    <pre style="background: rgba(0, 0, 0, 0.3); padding: var(--space-md); border-radius: 4px; margin: var(--space-sm) 0; overflow-x: auto; font-size: 0.9em;">{
  "target": 100000,
  "deadline": "2026-12-31T23:59:59.000Z",
  "writingDays": [true, true, true, true, true, true, false],
  "daysOff": [],
  "mode": "strict"
}</pre>
                  </li>
                  <li>These files can be created as Google Docs or uploaded as text files</li>
                </ul>
              </li>
              <li><strong>Update metadata.json with Drive folder IDs:</strong>
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Open <code>test-corpus/test-large/metadata.json</code> in a text editor</li>
                  <li>Get folder IDs from Google Drive (right-click folder → "Get link" → extract ID from URL)</li>
                  <li>Replace <code>REPLACE_WITH_DRIVE_FOLDER_ID</code> placeholders with actual IDs:
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li><code>project.driveFolderId</code> - The test-large story folder ID</li>
                      <li><code>story.driveFolderId</code> - Same as project folder ID</li>
                      <li><code>chapters[].driveFolderId</code> - Each chapter folder ID (Chapter 1, Chapter 2, ..., Chapter 25)</li>
                      <li><strong>Note:</strong> You'll need to update 25 chapter folder IDs - this can be time-consuming but is necessary for testing</li>
                    </ul>
                  </li>
                  <li>Save the updated metadata.json file</li>
                  <li><strong>Note:</strong> You don't need to update snippet IDs or note IDs - Yarny will discover these automatically</li>
                </ul>
              </li>
              <li><strong>Verify upload:</strong>
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Check folder structure matches expected structure</li>
                  <li>Verify Chapter 13 contains exactly 55 Google Docs (critical for export chunking tests)</li>
                  <li>Verify other chapters contain the expected number of Google Docs (15 each, or as specified in metadata.json)</li>
                  <li>Verify total chapter snippets = 430 (or as specified in metadata.json)</li>
                  <li>Verify People, Places, Things folders each contain 25 .txt files</li>
                  <li>Verify project.json, data.json, and goal.json exist</li>
                  <li>Test in Yarny:
                    <ul style="margin-top: var(--space-xs); padding-left: var(--space-lg);">
                      <li>Open Yarny app</li>
                      <li>The test-large story should appear in the stories list</li>
                      <li>Click on the story to open it</li>
                      <li>Verify all 25 chapters appear</li>
                      <li>Verify all 430+ snippets are accessible</li>
                      <li>Verify Chapter 13 has 55 snippets (check the snippet count)</li>
                      <li>Verify all 75 notes appear in the Notes sidebar</li>
                      <li>Test export functionality with Chapter 13 to verify chunking works correctly</li>
                    </ul>
                  </li>
                </ul>
              </li>
            </ol>
          </div>
          <div class="note-box" style="margin-top: var(--space-md);">
            <p><strong>Critical:</strong> Chapter 13 must have exactly 55 snippets to properly test export chunking functionality. This is essential for validating that large chapter exports handle Google Docs API body size limits correctly. Without this, export chunking tests will fail.</p>
          </div>
          <div class="note-box" style="margin-top: var(--space-md);">
            <p><strong>Time-saving tips:</strong> This upload process is very time-consuming due to the large number of files (430+ chapter snippets). Consider:
              <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                <li>Using Google Drive API scripts to automate file upload and conversion</li>
                <li>Uploading in batches and taking breaks</li>
                <li>Focusing on test-medium first if you need quicker validation</li>
                <li>Using bulk upload tools if available</li>
              </ul>
            </p>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="setup-0-5" name="setup-0-5">
            <label for="setup-0-5">test-large project uploaded to Google Drive (25 chapters, 430 chapter snippets including Chapter 13 with 55 snippets, 75 notes)</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Setup 0.6: Update Environment Variables</h4>
          <p>Configure environment variables to point to the test corpus folder in Google Drive.</p>
          <div class="test-steps">
            <ol>
              <li>Get the Google Drive folder ID for "Yarny Test Corpus":
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Open the folder in Google Drive</li>
                  <li>Copy the folder ID from the URL (the long string after <code>/folders/</code>)</li>
                </ul>
              </li>
              <li>Update your local <code>.env</code> file (or Netlify environment variables):
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Add or update: <code>VITE_TEST_CORPUS_FOLDER_ID=your-folder-id-here</code></li>
                </ul>
              </li>
              <li>If using Netlify, update environment variables in the Netlify dashboard:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Go to Site settings → Environment variables</li>
                  <li>Add or update <code>VITE_TEST_CORPUS_FOLDER_ID</code> with the folder ID</li>
                </ul>
              </li>
              <li>Verify the environment variable is set correctly</li>
              <li>Restart the development server if running locally</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="setup-0-6" name="setup-0-6">
            <label for="setup-0-6">Environment variables configured with test corpus folder ID</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Setup 0.7: Update Metadata Files with Drive IDs</h4>
          <p>Update the metadata.json files with actual Google Drive folder and file IDs for use in tests and MSW handlers.</p>
          <div class="test-steps">
            <ol>
              <li>For each test project (test-small, test-medium, test-large):
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Open the <code>metadata.json</code> file in the test-corpus directory</li>
                  <li>Replace <code>REPLACE_WITH_DRIVE_FOLDER_ID</code> placeholders with actual Drive folder IDs</li>
                  <li>Update story folder IDs</li>
                  <li>Update chapter folder IDs (if needed for your test setup)</li>
                  <li>Update snippet file IDs (if needed for your test setup)</li>
                </ul>
              </li>
              <li>Save the updated metadata files</li>
              <li>Verify the IDs are correct by checking in Google Drive</li>
              <li>Document the IDs for the engineering team (or commit to a shared location)</li>
            </ol>
          </div>
          <div class="note-box" style="margin-top: var(--space-md);">
            <p><strong>Note:</strong> The metadata files are used by MSW handlers and test fixtures. Keeping them up to date ensures tests can reference the correct Drive resources.</p>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="setup-0-7" name="setup-0-7">
            <label for="setup-0-7">Metadata files updated with actual Drive folder and file IDs</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Setup 0.8: Verify Test Corpus Structure</h4>
          <p>Verify that all test corpus projects are properly set up and accessible.</p>
          <div class="test-steps">
            <ol>
              <li>In Google Drive, navigate to "Yarny Test Corpus" folder</li>
              <li>Verify all three project folders exist: test-small, test-medium, test-large</li>
              <li>For each project, verify the structure:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Chapters folder exists with chapter subfolders</li>
                  <li>People, Places, Things folders exist with note files</li>
                  <li>project.json, data.json, and goal.json files exist in the story folder</li>
                </ul>
              </li>
              <li>Verify file counts:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>test-small: Basic structure (2+ snippets)</li>
                  <li>test-medium: 10 chapters × 8 snippets = 80 chapter snippets + 30 notes = 110 files</li>
                  <li>test-large: 25 chapters (Chapter 13 has 55, others have 15) = 430 chapter snippets + 75 notes = 505 files</li>
                </ul>
              </li>
              <li>Verify Chapter 13 in test-large has 55 snippets (critical for export chunking tests)</li>
              <li>Test accessing the projects in Yarny:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Open Yarny and navigate to the test corpus stories</li>
                  <li>Verify stories load correctly</li>
                  <li>Verify chapters and snippets are visible</li>
                  <li>Verify notes are accessible</li>
                </ul>
              </li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="setup-0-8" name="setup-0-8">
            <label for="setup-0-8">Test corpus structure verified and accessible in Yarny</label>
          </div>
        </div>

        <div class="note-box" style="margin-top: var(--space-2xl);">
          <p><strong>Test Corpus Usage:</strong> Once set up, use these test projects for comprehensive testing:</p>
          <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl); color: rgba(255, 255, 255, 0.9);">
            <li><strong>test-small:</strong> Fast smoke tests, basic operations, format normalization, IME composition, RTL handling</li>
            <li><strong>test-medium:</strong> Realistic project size, performance testing, export operations</li>
            <li><strong>test-large:</strong> Stress testing, virtualization validation, lazy loading, export chunking (especially Chapter 13 with 50+ snippets)</li>
          </ul>
        </div>
      </div>

        <!-- 
          Logical Testing Order (sections are now numbered in this order):
          1. Section 0: Test Corpus Setup (prerequisite)
          2. Section 1: Smoke Tests & Infrastructure (verify environment)
          3. Section 2: Google Drive Integration (foundational dependency)
          4. Section 3: Editor Testing (core editing functionality)
          5. Section 4: Drag & Drop (editor interaction)
          6. Section 5: Classic UX Anchors (UI consistency)
          7. Section 6: Notes Drag & Drop (notes functionality)
          8. Section 7: UI/UX Elements (general UI)
          9. Section 8: Export (depends on having content)
          10. Section 9: Performance & Edge Cases (stress testing)
          11. Section 10: Round-Trip Validation (comprehensive end-to-end)
          12. Section 11: Operations & Conflict Resolution (CRUD and sync validation)
        -->

        <!-- Section 1: Smoke Tests & Infrastructure Verification -->
        <div class="test-section" data-section-anchor id="section-1">
          <h2><i class="material-icons">build</i> Section 1: Smoke Tests & Infrastructure Verification</h2>
          <p style="color: rgba(255, 255, 255, 0.7); margin-bottom: var(--space-lg);">These tests validate the setup, infrastructure, and critical functionality before and during development. These should be executed early and re-verified after major changes.</p>
        
        <div class="test-item">
          <h4>Smoke Test 1.1: Local Development Setup</h4>
          <p>Verify that the development environment is set up correctly and the app runs locally.</p>
          <div class="test-steps">
            <ol>
              <li>Run <code>npm run dev</code> in the project root</li>
              <li>Verify the Vite dev server launches successfully</li>
              <li>Open the app in your browser (usually <code>http://localhost:5173</code>)</li>
              <li>Verify the Yarny React shell renders correctly</li>
              <li>Verify project and story side rails render placeholder Drive data from <code>createDriveClient</code> fallback</li>
              <li>Authenticate with Google (if required)</li>
              <li>Select a story from the list</li>
              <li>Verify the TipTap plain text editor loads with sample content</li>
              <li>Verify the editor is editable and responsive</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="smoke-9-1" name="smoke-9-1">
            <label for="smoke-9-1">Local development environment works correctly</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Smoke Test 1.2: Build & Lint</h4>
          <p>Verify that the project builds successfully and passes linting checks.</p>
          <div class="test-steps">
            <ol>
              <li>Run <code>npm run build</code> in the project root</li>
              <li>Verify the build completes without errors</li>
              <li>Verify a <code>dist/</code> folder is created containing the React bundle</li>
              <li>Run <code>npm run lint</code></li>
              <li>Verify linting executes without fatal errors</li>
              <li>Fix any critical linting errors (warnings are acceptable)</li>
              <li>Run <code>npm run test</code></li>
              <li>Note any test failures that need to be addressed</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="smoke-9-2" name="smoke-9-2">
            <label for="smoke-9-2">Build, lint, and test commands execute successfully</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Smoke Test 1.3: Netlify Functions & Deployment</h4>
          <p>Verify that Netlify Functions work correctly and deployment succeeds.</p>
          <div class="test-steps">
            <ol>
              <li>Run <code>netlify dev</code> in the project root</li>
              <li>Verify Netlify Functions start successfully</li>
              <li>Test a few API endpoints (e.g., <code>/api/config</code>, <code>/api/verify-google</code>)</li>
              <li>Verify functions return expected responses</li>
              <li>Check Netlify dashboard for environment variables:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Verify <code>GDRIVE_CLIENT_ID</code> is set</li>
                  <li>Verify <code>GDRIVE_CLIENT_SECRET</code> is set</li>
                  <li>Verify <code>GOOGLE_CLIENT_ID</code> is set</li>
                  <li>Verify <code>VITE_TEST_CORPUS_FOLDER_ID</code> is set (if using test corpus)</li>
                </ul>
              </li>
              <li>Verify deployment completes successfully</li>
              <li>Verify the deployed site loads correctly</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="smoke-9-3" name="smoke-9-3">
            <label for="smoke-9-3">Netlify Functions and deployment work correctly</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Smoke Test 1.4: Editor Plain Text Discipline</h4>
          <p>Verify that the editor only supports plain text and preserves formatting correctly.</p>
          <div class="test-steps">
            <ol>
              <li>Open a snippet in the editor</li>
              <li>Verify the TipTap toolbar is hidden (no formatting buttons visible)</li>
              <li>Verify only plain text input is available</li>
              <li>Try keyboard shortcuts for formatting (Ctrl+B, Ctrl+I, Ctrl+U) - they should NOT work</li>
              <li>Open a Google Doc with formatted text (bold, italic, colors, etc.)</li>
              <li>Copy text from the Google Doc</li>
              <li>Paste into the Yarny editor</li>
              <li>Verify formatting is stripped and only plain text remains</li>
              <li>Verify paragraph breaks (double Enter) are preserved</li>
              <li>Verify hard breaks (Shift+Enter) are preserved</li>
              <li>Save the snippet</li>
              <li>Open the snippet's Google Doc in Google Drive</li>
              <li>Verify paragraph breaks and hard breaks are preserved correctly</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="smoke-9-4" name="smoke-9-4">
            <label for="smoke-9-4">Editor enforces plain text discipline and preserves breaks</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Smoke Test 1.5: State Management</h4>
          <p>Verify that Zustand store initializes correctly and React Query cache invalidation works.</p>
          <div class="test-steps">
            <ol>
              <li>Open the app in development mode</li>
              <li>Open browser DevTools console</li>
              <li>Verify no runtime warnings appear about Zustand store initialization</li>
              <li>Verify the store initializes without errors in React strict mode</li>
              <li>Install React Query DevTools (if not already installed):
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Add <code>import { ReactQueryDevtools } from '@tanstack/react-query-devtools'</code> to your app</li>
                  <li>Add <code>&lt;ReactQueryDevtools initialIsOpen={false} /&gt;</code> to your app component</li>
                </ul>
              </li>
              <li>Open React Query DevTools in the browser</li>
              <li>Make an edit to a snippet</li>
              <li>Manually save the snippet (or wait for auto-save)</li>
              <li>Verify query cache invalidation occurs (check DevTools for cache updates)</li>
              <li>Verify the UI updates reflect the saved changes</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="smoke-9-5" name="smoke-9-5">
            <label for="smoke-9-5">State management and cache invalidation work correctly</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Smoke Test 1.6: Create Operations</h4>
          <p>Verify that all create operations work correctly (stories, chapters, snippets, notes).</p>
          <div class="test-steps">
            <ol>
              <li>Create a new story:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Click "New Story" button</li>
                  <li>Enter a story name</li>
                  <li>Optionally set a goal</li>
                  <li>Click "Create"</li>
                  <li>Verify the story appears in the list</li>
                  <li>Verify the story folder is created in Google Drive</li>
                </ul>
              </li>
              <li>Create a new chapter:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Right-click on the story or use context menu</li>
                  <li>Select "New Chapter"</li>
                  <li>Enter a chapter name</li>
                  <li>Verify the chapter appears in the sidebar</li>
                  <li>Verify the chapter folder is created in Google Drive</li>
                </ul>
              </li>
              <li>Create a new snippet:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Right-click on a chapter or use context menu</li>
                  <li>Select "New Snippet"</li>
                  <li>Enter a snippet name</li>
                  <li>Verify the snippet appears in the sidebar</li>
                  <li>Verify the snippet Google Doc is created in Google Drive</li>
                </ul>
              </li>
              <li>Create a new note (People, Places, or Things):
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Open the Notes sidebar</li>
                  <li>Click "New People" (or Places/Things)</li>
                  <li>Enter a note name</li>
                  <li>Verify the note appears in the sidebar</li>
                  <li>Verify the note text file is created in Google Drive</li>
                </ul>
              </li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="smoke-9-6" name="smoke-9-6">
            <label for="smoke-9-6">All create operations work correctly</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Smoke Test 1.7: Rename Operations</h4>
          <p>Verify that all rename operations work correctly and persist to Google Drive.</p>
          <div class="test-steps">
            <ol>
              <li>Rename a story:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Right-click on a story</li>
                  <li>Select "Rename"</li>
                  <li>Enter a new name</li>
                  <li>Verify the story name updates in the UI</li>
                  <li>Verify the story folder is renamed in Google Drive</li>
                </ul>
              </li>
              <li>Rename a chapter:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Right-click on a chapter</li>
                  <li>Select "Rename"</li>
                  <li>Enter a new name</li>
                  <li>Verify the chapter name updates in the UI</li>
                  <li>Verify the chapter folder is renamed in Google Drive</li>
                </ul>
              </li>
              <li>Rename a snippet:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Right-click on a snippet</li>
                  <li>Select "Rename"</li>
                  <li>Enter a new name</li>
                  <li>Verify the snippet name updates in the UI</li>
                  <li>Verify the snippet Google Doc is renamed in Google Drive</li>
                </ul>
              </li>
              <li>Rename a note:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Right-click on a note</li>
                  <li>Select "Rename"</li>
                  <li>Enter a new name</li>
                  <li>Verify the note name updates in the UI</li>
                  <li>Verify the note text file is renamed in Google Drive</li>
                </ul>
              </li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="smoke-9-7" name="smoke-9-7">
            <label for="smoke-9-7">All rename operations work correctly</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Smoke Test 1.8: Reorder Operations</h4>
          <p>Verify that drag & drop reordering works correctly and persists to Google Drive.</p>
          <div class="test-steps">
            <ol>
              <li>Reorder chapters:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Drag a chapter up or down in the sidebar</li>
                  <li>Release to drop it in a new position</li>
                  <li>Verify the chapter moves to the new position</li>
                  <li>Refresh the page</li>
                  <li>Verify the chapter order is preserved</li>
                </ul>
              </li>
              <li>Reorder snippets:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Drag a snippet up or down within a chapter</li>
                  <li>Release to drop it in a new position</li>
                  <li>Verify the snippet moves to the new position</li>
                  <li>Refresh the page</li>
                  <li>Verify the snippet order is preserved</li>
                </ul>
              </li>
              <li>Move snippet between chapters:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Drag a snippet from one chapter to another</li>
                  <li>Release to drop it in the new chapter</li>
                  <li>Verify the snippet moves to the new chapter</li>
                  <li>Verify the snippet disappears from the old chapter</li>
                  <li>Verify the snippet Google Doc is moved in Google Drive</li>
                </ul>
              </li>
              <li>Reorder notes:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Drag a note up or down in the Notes sidebar</li>
                  <li>Release to drop it in a new position</li>
                  <li>Verify the note moves to the new position</li>
                  <li>Refresh the page</li>
                  <li>Verify the note order is preserved</li>
                </ul>
              </li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="smoke-9-8" name="smoke-9-8">
            <label for="smoke-9-8">All reorder operations work correctly</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Smoke Test 1.9: Edit Operations</h4>
          <p>Verify that editing snippets and notes works correctly and auto-saves to Google Drive.</p>
          <div class="test-steps">
            <ol>
              <li>Edit a snippet:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Open a snippet in the editor</li>
                  <li>Type some text</li>
                  <li>Verify the word count updates in real-time</li>
                  <li>Wait for auto-save (check save status indicator)</li>
                  <li>Verify "Saved at X:XX" appears after save</li>
                  <li>Open the snippet's Google Doc in Google Drive</li>
                  <li>Verify your changes appear in the Google Doc</li>
                </ul>
              </li>
              <li>Edit a note:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Open a note in the Notes sidebar</li>
                  <li>Edit the note content</li>
                  <li>Wait for auto-save</li>
                  <li>Verify the note text file is updated in Google Drive</li>
                </ul>
              </li>
              <li>Test undo/redo (if available):
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Make an edit</li>
                  <li>Press Ctrl+Z (or Cmd+Z) to undo</li>
                  <li>Verify the change is undone</li>
                  <li>Press Ctrl+Shift+Z (or Cmd+Shift+Z) to redo</li>
                  <li>Verify the change is redone</li>
                </ul>
              </li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="smoke-9-9" name="smoke-9-9">
            <label for="smoke-9-9">All edit operations work correctly with auto-save</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Smoke Test 1.10: Export Operations</h4>
          <p>Verify that all export operations work correctly and create Google Docs in Drive.</p>
          <div class="test-steps">
            <ol>
              <li>Export all chapters:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Click "Export" and select "Export All Chapters"</li>
                  <li>Enter a filename</li>
                  <li>Optionally choose to include snippet names</li>
                  <li>Click "Export"</li>
                  <li>Verify a new Google Doc is created in the story folder</li>
                  <li>Open the exported Google Doc</li>
                  <li>Verify all chapters and snippets are included in order</li>
                </ul>
              </li>
              <li>Export outline:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Click "Export" and select "Export Outline"</li>
                  <li>Enter a filename</li>
                  <li>Click "Export"</li>
                  <li>Verify a new Google Doc is created</li>
                  <li>Verify it contains chapter titles, snippet titles, and descriptions</li>
                  <li>Verify it does NOT contain snippet body content</li>
                </ul>
              </li>
              <li>Export notes (People, Places, Things):
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Export each note type separately</li>
                  <li>Verify exported Google Docs contain all notes of that type</li>
                  <li>Verify note content is included correctly</li>
                </ul>
              </li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="smoke-9-10" name="smoke-9-10">
            <label for="smoke-9-10">All export operations work correctly</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Smoke Test 1.11: Conflict Resolution (Concurrency Safety)</h4>
          <p>Verify that conflict detection and resolution work correctly when multiple editors modify the same content.</p>
          <div class="test-steps">
            <ol>
              <li>Open Yarny in two browser tabs (Tab 1 and Tab 2)</li>
              <li>In Tab 1, open a snippet and make an edit</li>
              <li>Save the snippet in Tab 1</li>
              <li>In Tab 2, open the same snippet (make it idle, not actively editing)</li>
              <li>In another browser tab, open the snippet's Google Doc in Google Docs</li>
              <li>Make different edits in Google Docs</li>
              <li>Save in Google Docs</li>
              <li>In Tab 2, switch back to the snippet</li>
              <li>Verify a conflict resolution modal appears</li>
              <li>Verify you can see both versions (Yarny vs Google Docs)</li>
              <li>Choose "Keep Yarny Version" and verify it works</li>
              <li>Trigger another conflict</li>
              <li>Choose "Use Google Docs Version" and verify it works</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="smoke-9-11" name="smoke-9-11">
            <label for="smoke-9-11">Conflict resolution works correctly</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Smoke Test 1.12: Round-Trip Testing (Round-Trip Integrity)</h4>
          <p>Verify that content can be edited in both Yarny and Google Docs with no data loss or format corruption.</p>
          <div class="test-steps">
            <ol>
              <li>Edit a snippet in Yarny with special characters (quotes, em dashes, etc.)</li>
              <li>Add paragraph breaks (double Enter) and line breaks (Shift+Enter)</li>
              <li>Save the snippet in Yarny</li>
              <li>Open the snippet's Google Doc in Google Docs</li>
              <li>Verify all content matches exactly (paragraph breaks, line breaks, special characters)</li>
              <li>Edit in Google Docs (add text, modify existing text)</li>
              <li>Save in Google Docs</li>
              <li>In Yarny, switch to a different snippet and switch back</li>
              <li>Verify Yarny detects the external changes</li>
              <li>Verify all content is preserved correctly (no format loss, no corruption)</li>
              <li>Edit in Yarny again</li>
              <li>Save and verify in Google Docs that all changes are preserved</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="smoke-9-12" name="smoke-9-12">
            <label for="smoke-9-12">Round-trip editing preserves all content correctly</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Smoke Test 1.13: Performance & Loading</h4>
          <p>Verify that the app performs well with large projects and loads content efficiently.</p>
          <div class="test-steps">
            <ol>
              <li>Open a large story (use test-large project if available):
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Verify the app loads in a reasonable time (&lt; 5 seconds)</li>
                  <li>Verify scrolling through chapters/snippets is smooth</li>
                  <li>Verify snippet switching is responsive</li>
                </ul>
              </li>
              <li>Test lazy loading:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Open a story with many snippets</li>
                  <li>Verify the active snippet loads immediately</li>
                  <li>Check browser network tab</li>
                  <li>Verify other snippets load in the background (lazy loading)</li>
                  <li>Switch to a different snippet</li>
                  <li>Verify it loads quickly (may be from cache if already loaded)</li>
                </ul>
              </li>
              <li>Test performance budgets:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Open a snippet already in cache</li>
                  <li>Click on it and start typing immediately</li>
                  <li>Measure time from click to first character appearing</li>
                  <li>Verify latency is ≤300 ms (hot path)</li>
                  <li>Open a snippet not yet loaded</li>
                  <li>Measure time from click to first character appearing</li>
                  <li>Verify latency is ≤1.5 s (cold path)</li>
                </ul>
              </li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="smoke-9-13" name="smoke-9-13">
            <label for="smoke-9-13">Performance and loading meet requirements</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Smoke Test 1.14: Error Handling & Rate Limiting</h4>
          <p>Verify that the app handles errors gracefully and respects Drive API rate limits.</p>
          <div class="test-steps">
            <ol>
              <li>Test offline handling:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Disable network (or use browser dev tools)</li>
                  <li>Make an edit to a snippet</li>
                  <li>Verify offline banner appears</li>
                  <li>Verify save status shows "Queued - will save when online"</li>
                  <li>Re-enable network</li>
                  <li>Verify queued saves automatically retry and complete</li>
                </ul>
              </li>
              <li>Test error messages:
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Trigger an error (e.g., invalid file ID, network error)</li>
                  <li>Verify a clear error message appears</li>
                  <li>Verify you can retry the action if applicable</li>
                </ul>
              </li>
              <li>Test rate limiting (if possible):
                <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl);">
                  <li>Make rapid requests (or simulate 429 error)</li>
                  <li>Verify exponential backoff is applied</li>
                  <li>Verify retry only happens when tab is visible</li>
                  <li>Verify a clear error message is displayed</li>
                  <li>Verify automatic retry happens after backoff delay</li>
                </ul>
              </li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="smoke-9-14" name="smoke-9-14">
            <label for="smoke-9-14">Error handling and rate limiting work correctly</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Smoke Test 1.15: Cross-Tab Conflicts (Yarny vs. Yarny)</h4>
          <p>Verify that Yarny detects and prevents conflicts when the same snippet is edited in multiple tabs.</p>
          <div class="test-steps">
            <ol>
              <li>Open Yarny in two browser tabs (Tab 1 and Tab 2)</li>
              <li>In Tab 1, open a snippet and start editing</li>
              <li>In Tab 2, try to open the same snippet</li>
              <li>Verify Tab 2 shows "Editing in another tab" message or read-only indicator</li>
              <li>Verify Tab 2 is read-only (cannot edit) while Tab 1 is editing</li>
              <li>Save the snippet in Tab 1</li>
              <li>Switch to Tab 2</li>
              <li>Verify Tab 2 updates with the latest content from Tab 1</li>
              <li>Close Tab 1</li>
              <li>Verify Tab 2 regains edit capability (no longer read-only)</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="smoke-9-15" name="smoke-9-15">
            <label for="smoke-9-15">Cross-tab conflict detection works correctly</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Smoke Test 1.16: Visibility-Based Request Gating</h4>
          <p>Verify that Yarny only makes background requests when the browser tab is visible.</p>
          <div class="test-steps">
            <ol>
              <li>Open Yarny in multiple browser tabs</li>
              <li>Open a story with many snippets in Tab 1</li>
              <li>Switch to Tab 2 (Tab 1 becomes hidden)</li>
              <li>Check browser network tab or console</li>
              <li>Verify Tab 1 stops making background prefetch requests when hidden</li>
              <li>Switch back to Tab 1 (tab becomes visible)</li>
              <li>Verify background prefetch requests resume in Tab 1</li>
              <li>Verify only the visible tab makes background requests</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="smoke-9-16" name="smoke-9-16">
            <label for="smoke-9-16">Visibility-based request gating works correctly</label>
          </div>
        </div>

        <div class="note-box" style="margin-top: var(--space-2xl);">
          <p><strong>Smoke Test Execution:</strong> These smoke tests should be executed:</p>
          <ul style="margin-top: var(--space-sm); padding-left: var(--space-xl); color: rgba(255, 255, 255, 0.9);">
            <li><strong>Before Phase 2:</strong> Tests 9.1-9.5 (Local Development, Build, Netlify, Editor, State Management)</li>
            <li><strong>After Phase 4:</strong> Tests 9.6-9.10 (Create, Rename, Reorder, Edit, Export)</li>
            <li><strong>After Phase 5:</strong> Tests 9.11-9.12 (Conflict Resolution, Round-Trip)</li>
            <li><strong>After Phase 6:</strong> Tests 9.13-9.16 (Performance, Error Handling, Cross-Tab, Visibility Gating)</li>
            <li><strong>Before Ship:</strong> Re-execute all smoke tests to verify no regressions</li>
          </ul>
        </div>
      </div>

        <!-- Section 2: Google Drive Integration & Sync -->
        <div class="test-section" data-section-anchor id="section-2">
          <h2><i class="material-icons">cloud</i> Section 2: Google Drive Integration & Sync</h2>
          <p style="color: rgba(255, 255, 255, 0.7); margin-bottom: var(--space-lg);">Google Drive integration is foundational - most other features depend on it working correctly.</p>
        
        <div class="test-item">
          <h4>Test 2.1: Files Created in Google Drive</h4>
          <p>Verify that all created items (stories, chapters, snippets, notes) appear in Google Drive.</p>
          <div class="test-steps">
            <ol>
              <li>Create a new story in Yarny</li>
              <li>Open Google Drive in another tab</li>
              <li>Navigate to "Yarny Stories" folder</li>
              <li>Verify the story folder exists</li>
              <li>Create a chapter and snippet in Yarny</li>
              <li>Refresh Google Drive</li>
              <li>Verify the chapter folder and snippet Google Doc exist in the story folder</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="test-6-1" name="test-6-1">
            <label for="test-6-1">All created items appear in Google Drive</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Test 2.2: Changes Saved to Google Drive</h4>
          <p>Verify that edits made in Yarny are saved to Google Drive files.</p>
          <div class="test-steps">
            <ol>
              <li>Edit a snippet in Yarny</li>
              <li>Wait for auto-save to complete (check save status)</li>
              <li>Open the snippet's Google Doc in Google Drive</li>
              <li>Verify your changes appear in the Google Doc</li>
              <li>Edit a note in Yarny</li>
              <li>Open the note's text file in Google Drive</li>
              <li>Verify your changes appear in the text file</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="test-6-2" name="test-6-2">
            <label for="test-6-2">Changes are saved to Google Drive files</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Test 2.3: Round-Trip Editing (Yarny → Google Docs → Yarny)</h4>
          <p>Verify that you can edit in Google Docs and see changes in Yarny with no format loss (plain text only).</p>
          <div class="test-steps">
            <ol>
              <li>Edit a snippet in Yarny with paragraph breaks (double Enter) and line breaks (Shift+Enter)</li>
              <li>Save the snippet in Yarny</li>
              <li>Open the same snippet's Google Doc in Google Docs (another tab)</li>
              <li>Verify the content matches exactly (paragraph breaks and line breaks preserved)</li>
              <li>Make changes in Google Docs (add text, modify existing text)</li>
              <li>Save in Google Docs</li>
              <li>In Yarny, switch to a different snippet (or close and reopen Yarny)</li>
              <li>Switch back to the original snippet</li>
              <li>Verify Yarny detects the external changes (may show conflict resolution or reconciliation)</li>
              <li>Verify you can see the changes from Google Docs</li>
              <li>Verify paragraph breaks and line breaks are still preserved correctly</li>
              <li>Verify no formatting (bold, italic, etc.) was introduced</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="test-6-3" name="test-6-3">
            <label for="test-6-3">I can edit in Google Docs and see changes in Yarny with no format loss</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Test 2.3a: Cross-Edit Testing (Yarny Idle → Google Docs Edit → Yarny)</h4>
          <p>Verify that Yarny detects changes made in Google Docs while Yarny is idle (not actively editing the snippet).</p>
          <div class="test-steps">
            <ol>
              <li>Open a snippet in Yarny (make it the active snippet)</li>
              <li>Switch to a different snippet in Yarny (make the first snippet idle, not actively being edited)</li>
              <li>In another tab, open the first snippet's Google Doc in Google Docs</li>
              <li>Make edits in Google Docs</li>
              <li>Save in Google Docs</li>
              <li>Return to Yarny and switch back to the first snippet</li>
              <li>Verify Yarny detects the external changes</li>
              <li>Verify a conflict resolution modal or reconciliation notification appears</li>
              <li>Verify you can see the changes from Google Docs</li>
              <li>Verify you can choose to keep Yarny version or use Google Docs version</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="test-6-3a" name="test-6-3a">
            <label for="test-6-3a">Yarny detects changes made in Google Docs while snippet is idle</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Test 2.4: Conflict Detection</h4>
          <p>Verify that Yarny detects conflicts when both Yarny and Google Docs are edited (but NOT while actively editing in Yarny).</p>
          <div class="test-steps">
            <ol>
              <li>Edit a snippet in Yarny and save</li>
              <li>Switch to a different snippet in Yarny (make the first snippet idle)</li>
              <li>Open the first snippet's Google Doc in Google Docs (another tab)</li>
              <li>Make different changes in Google Docs</li>
              <li>Save in Google Docs</li>
              <li>In Yarny, switch back to the original snippet</li>
              <li>Verify a conflict resolution modal appears (conflicts are detected when switching snippets, not while actively editing)</li>
              <li>Verify you can see both versions (Yarny version vs Google Docs version)</li>
              <li>Verify the modal shows timestamps for both versions</li>
              <li>Verify you can compare the differences</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="test-6-4" name="test-6-4">
            <label for="test-6-4">Conflict detection works when both are edited (detected on snippet switch)</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Test 2.5: Conflict Resolution - Keep Yarny Version</h4>
          <p>Verify that you can resolve conflicts by keeping the Yarny version.</p>
          <div class="test-steps">
            <ol>
              <li>Trigger a conflict (see Test 2.4)</li>
              <li>In the conflict resolution modal, choose "Keep Yarny Version"</li>
              <li>Verify the Yarny version is kept</li>
              <li>Verify the Google Doc is updated with the Yarny version</li>
              <li>Open the Google Doc in Google Docs</li>
              <li>Verify it matches the Yarny version</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="test-6-5" name="test-6-5">
            <label for="test-6-5">I can resolve conflicts by keeping Yarny version</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Test 2.6: Conflict Resolution - Use Google Docs Version</h4>
          <p>Verify that you can resolve conflicts by using the Google Docs version.</p>
          <div class="test-steps">
            <ol>
              <li>Trigger a conflict (see Test 2.4)</li>
              <li>In the conflict resolution modal, choose "Use Google Docs Version"</li>
              <li>Verify the Google Docs version replaces the Yarny content</li>
              <li>Verify the editor shows the Google Docs content</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="test-6-6" name="test-6-6">
            <label for="test-6-6">I can resolve conflicts by using Google Docs version</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Test 2.7: Reconciliation on Window Focus</h4>
          <p>Verify that Yarny checks for external changes when the window regains focus.</p>
          <div class="test-steps">
            <ol>
              <li>Open a snippet in Yarny</li>
              <li>Switch to another browser tab</li>
              <li>Edit the snippet's Google Doc in Google Docs</li>
              <li>Save in Google Docs</li>
              <li>Switch back to the Yarny tab (window regains focus)</li>
              <li>Verify Yarny detects the external changes</li>
              <li>Verify a reconciliation notification appears (or conflict modal if content differs)</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="test-6-7" name="test-6-7">
            <label for="test-6-7">Yarny checks for external changes on window focus</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Test 2.8: Comments/Tracked Changes Warning</h4>
          <p>Verify that Yarny warns about comments or tracked changes in Google Docs.</p>
          <div class="test-steps">
            <ol>
              <li>Open a snippet's Google Doc in Google Docs</li>
              <li>Add a comment to the document</li>
              <li>Save in Google Docs</li>
              <li>In Yarny, try to save the snippet (or switch snippets)</li>
              <li>Verify a warning modal appears about comments/tracked changes</li>
              <li>Verify you can acknowledge the warning and proceed</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="test-6-8" name="test-6-8">
            <label for="test-6-8">Yarny warns about comments/tracked changes in Google Docs</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Test 2.9: Cross-Tab Yarny Conflicts</h4>
          <p>Verify that Yarny detects and prevents conflicts when the same snippet is edited in multiple Yarny tabs.</p>
          <div class="test-steps">
            <ol>
              <li>Open Yarny in two browser tabs (Tab 1 and Tab 2)</li>
              <li>In Tab 1, open a snippet and start editing</li>
              <li>In Tab 2, try to open the same snippet</li>
              <li>Verify Tab 2 shows "Editing in another tab" message or read-only indicator</li>
              <li>Verify Tab 2 is read-only (cannot edit) while Tab 1 is editing</li>
              <li>Save the snippet in Tab 1</li>
              <li>Switch to Tab 2</li>
              <li>Verify Tab 2 updates with the latest content from Tab 1</li>
              <li>Close Tab 1</li>
              <li>Verify Tab 2 regains edit capability (no longer read-only)</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="test-6-9" name="test-6-9">
            <label for="test-6-9">Cross-tab conflict detection prevents simultaneous editing</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Test 2.10: Format Normalization (Line Endings, NBSPs, Trailing Spaces)</h4>
          <p>Verify that Yarny normalizes text format to match Google Docs behavior (mixed line endings, non-breaking spaces, trailing spaces).</p>
          <div class="test-steps">
            <ol>
              <li>Create a snippet with mixed line endings: some lines ending with `\n`, some with `\r\n`, some with `\r`</li>
              <li>Add non-breaking spaces (NBSP) in the text</li>
              <li>Add trailing spaces at the end of some lines</li>
              <li>Save the snippet in Yarny</li>
              <li>Open the Google Doc in Google Drive</li>
              <li>Verify all line endings are normalized to `\n` (no `\r\n` or `\r`)</li>
              <li>Verify NBSPs are normalized to regular spaces</li>
              <li>Verify trailing spaces are handled correctly (may be collapsed by Google Docs)</li>
              <li>Edit the snippet in Google Docs and add more mixed formatting</li>
              <li>Switch snippets in Yarny and switch back</li>
              <li>Verify the text is normalized correctly after round-trip</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="test-6-10" name="test-6-10">
            <label for="test-6-10">Format normalization works correctly (line endings, NBSPs, trailing spaces)</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Test 2.11: Visibility-Based Request Gating</h4>
          <p>Verify that Yarny only makes background requests when the browser tab is visible (prevents Drive quota exhaustion).</p>
          <div class="test-steps">
            <ol>
              <li>Open Yarny in multiple browser tabs</li>
              <li>Open a story with many snippets in Tab 1</li>
              <li>Switch to Tab 2 (Tab 1 becomes hidden)</li>
              <li>Check browser network tab or console</li>
              <li>Verify Tab 1 stops making background prefetch requests when hidden</li>
              <li>Switch back to Tab 1 (tab becomes visible)</li>
              <li>Verify background prefetch requests resume in Tab 1</li>
              <li>Verify only the visible tab makes background requests</li>
              <li>Test with mutations (save, delete, rename) in hidden tab</li>
              <li>Verify mutations also respect visibility gating (may be queued or delayed)</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="test-6-11" name="test-6-11">
            <label for="test-6-11">Visibility-based request gating prevents quota exhaustion</label>
          </div>
        </div>

        <div class="test-item">
          <h4>Test 2.12: Drive API Rate Limiting (429 Errors)</h4>
          <p>Verify that Yarny handles Drive API rate limit errors (429) gracefully with exponential backoff.</p>
          <div class="test-steps">
            <ol>
              <li>Trigger rate limiting by making rapid requests (or simulate 429 error)</li>
              <li>Verify Yarny detects the 429 rate limit error</li>
              <li>Verify exponential backoff with jitter is applied (delays between retries: 1s, 2s, 4s, etc.)</li>
              <li>Verify retry only happens when tab is visible (background tabs don't retry)</li>
              <li>Verify a clear error message is displayed to the user</li>
              <li>Verify automatic retry happens after backoff delay</li>
              <li>Verify no infinite retry loops (max 3 retries)</li>
              <li>After successful retry, verify the operation completes</li>
            </ol>
          </div>
          <div class="checkbox-container">
            <input type="checkbox" id="test-6-12" name="test-6-12">
            <label for="test-6-12">Drive API rate limiting is handled gracefully with exponential backoff</label>
          </div>
        </div>
      </div>

        <div class="summary-section" id="phase-summary" data-section-anchor>
          <h2>Phase 1 Progress</h2>
          <p style="color: rgba(255, 255, 255, 0.78); margin-bottom: var(--space-xl);">Track completion of setup prerequisites before moving to Phase 2.</p>
          <div class="summary-stats">
            <div class="stat-box">
              <div class="stat-number" id="totalTests">0</div>
              <div class="stat-label">Total Tasks</div>
            </div>
            <div class="stat-box">
              <div class="stat-number" id="completedTests">0</div>
              <div class="stat-label">Completed</div>
            </div>
            <div class="stat-box">
              <div class="stat-number" id="remainingTests">0</div>
              <div class="stat-label">Remaining</div>
            </div>
            <div class="stat-box">
              <div class="stat-number" id="completionPercent">0%</div>
              <div class="stat-label">Completion</div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <footer class="shared-footer">
      <div class="shared-footer-content">
        <p class="shared-footer-copy">
          © <span data-current-year>2025</span> Yarny. Your personal writing tool.
        </p>
        <nav class="shared-footer-nav" aria-label="Footer navigation">
          <a href="/stories.html" id="footerStoriesLink" style="display: none;">My Stories</a>
          <a href="/docs.html">User Guide</a>
          <a href="/migration-plan">Migration Plan</a>
          <a href="/migration-plan/testing-workbook">Testing Workbook</a>
          <a href="/" id="footerLoginLink">Back to Login</a>
        </nav>
      </div>
    </footer>
  </div>
</body>
</html>
